(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2082b7"],{a43a:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[t._l(t.books,(function(n){return e("a-button",{key:n.bookId,staticStyle:{"margin-left":"15px"},attrs:{type:"primary"},on:{click:function(e){return t.findChapterByBookId(n.bookId)}}},[t._v(" "+t._s(n.name)+" ")])})),e("br"),e("br"),e("br"),t._l(t.bookChapters,(function(n){return e("a-button",{key:n.chapterId,staticStyle:{margin:"5px"},on:{click:function(e){return t.open(n.chapterId)}}},[t._v(" "+t._s(n.chapterTitle)+" ")])})),e("a-modal",{attrs:{visible:t.visible,width:"96%",maskClosable:!1,okText:"下一话",cancelText:"关闭"},on:{cancel:t.close,ok:t.next}},[t._l(t.bookContents,(function(n){return e("span",[e("span",{staticStyle:{"font-size":"15px"}},[t._v("第"+t._s(n.contentNo)+"张")]),e("span",{staticStyle:{color:"red","margin-left":"30px"},on:{click:function(e){return t.openError(n)}}},[t._v("错误更正")]),e("a-popconfirm",{attrs:{title:"确定删除?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(e){return t.deleteContent(n.contentId)}}},[e("span",{staticStyle:{color:"red","margin-left":"30px"}},[t._v("删除")])]),e("img",{staticStyle:{width:"100%"},attrs:{referrer:"no-referrer|origin|unsafe-url",src:n.contentUrl.replace("http://127.0.0.1:9999","https://4625t91w39.goho.co")}})],1)})),e("a-modal",{attrs:{visible:t.errorVisible,width:"200px"},on:{cancel:t.closeError,ok:t.editContent}},[e("span",[t._v("实际张数：")]),e("a-input-number",{model:{value:t.editContentNo,callback:function(e){t.editContentNo=e},expression:"editContentNo"}})],1)],2)],2)},s=[],i=n("9ab4"),a=n("1b40"),r=n("79f6");let c=class extends a["c"]{constructor(){super(...arguments),this.books=[],this.bookChapters=[],this.bookContents=[],this.visible=!1,this.errorVisible=!1,this.editContentNo=1,this.editContentModel=null,this._thisChapterId="-1",this._thisChapterNo=1,this._thisBookId="1"}created(){this.findAllBooks()}mounted(){this.findAllBooks()}async findAllBooks(){try{const t=await r["a"].findAllBooks();this.books=t}catch(t){}}async findChapterByBookId(t){try{this.bookChapters=[];const e=await r["a"].findChapterByBookId(t);this.bookChapters=e,this._thisChapterId="-1"}catch(e){}}async findAllBookContent(t){try{this.visible=!0,this.bookChapters=[],this.bookContents=[];const e=await r["a"].findAllBookContent(t);this.bookContents=e,this._thisChapterId="-1"}catch(e){}}async findContentByChapterId(t){try{this._thisChapterId=t,this.bookContents=[];const e=await r["a"].findContentByChapterId(t);this.bookContents=e}catch(e){}}async nextContent(t){try{const e=await r["a"].nextContent(t);this.bookContents=e,this._thisChapterId=e[0].chapterId}catch(e){alert(e.msg)}}async open(t){this.visible=!0,await this.findContentByChapterId(t)}close(){this.visible=!1}next(){this.bookContents=[],this.nextContent(this._thisChapterId)}openError(t){this.errorVisible=!0,this.editContentModel=t,this.editContentNo=t.contentNo}closeError(){this.errorVisible=!1,this.editContentModel=null}async editContent(){try{const t={contentNo:this.editContentNo,contentId:this.editContentModel.contentId};await r["a"].updateContent(t),r["a"].findContentByChapterId(this._thisChapterId).then(t=>{this.bookContents=t,this.$message.success("修改成功"),this.closeError()})}catch(t){}}async deleteContent(t){try{await r["a"].deleteContent(t),r["a"].findContentByChapterId(this._thisChapterId).then(t=>{this.bookContents=t,this.$message.success("删除成功")})}catch(e){alert(e.msg)}}};c=Object(i["a"])([Object(a["a"])({})],c);var h=c,l=h,d=n("2877"),p=Object(d["a"])(l,o,s,!1,null,"e737c1d6",null);e["default"]=p.exports}}]);